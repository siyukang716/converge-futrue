<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<div th:fragment="deptTreeControl">
    <div id="deptZTreeInstance" class="ztree" style="width: 100%; height: 500px; overflow: scroll;"></div>
    <script >
        var deptZTreeInstancesetting = {
            data: {
                simpleData: {
                    enable: true,
                    idKey: 'dept_id',
                    pIdKey: 'parent_dept_id',
                    rootPId: -1
                },
                key :{
                    name : 'dept_name'
                }
            }, view: {
                showLine: false,
                showIcon: true,
            }, async: {
                enable: true,
                type: "get",
                dataType: 'json',
                url: '/system/dept/tree',
                autoParam: ['dept_id', 'parent_dept_id']
            }, callback: {
                onClick: deptZTreeInstanceOnClick
            }
        };
        $(function () {
            $.ajax({
                url: '/system/dept/tree',
                data: {'dept_id':-1},
                cache: false,
                dataType: 'json',
                success: function (data) {
                    $.fn.zTree.init($("#deptZTreeInstance"), deptZTreeInstancesetting, data);
                },
                error: function (data) {

                }
            })
        });
    function deptZTreeInstanceOnClick(event, treeId, treeNode, clickFlag) {
        //debugger;
        deptZTreeInstanceOnClickCall(event, treeId, treeNode, clickFlag);
    }
    </script>
</div>
</html>